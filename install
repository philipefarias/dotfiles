#!/usr/bin/env bash
set -e

here="$(cd "${0%/*}"; pwd)"

echo "Linking dotfiles:"
for file in bash_profile bashrc gitconfig gitignore_global gvimrc vimrc tmux.conf; do
  ln -sfhv "$here/$file" "${HOME}/.$file"
done

echo

if git --version &>/dev/null; then
  echo "Setting up Git:"
  git config --global core.excludesfile "${HOME}/.gitignore_global" && echo "Git global excludes file set"
fi

echo
echo "Setting up Vim:"
mkdir -p "${HOME}/.vim/.backup" && echo "Vim backup directory created"
mkdir -p "${HOME}/.vim/.tmp" && echo "Vim tmp directory created"

if git --version &>/dev/null; then
  git clone "https://github.com/gmarik/vundle.git" "${HOME}/.vim/bundle/vundle"
  echo
  echo "To install Vim bundles execute: \`vim +BundleInstall +qall\`"
  echo
fi
